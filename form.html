<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Alure Emai List</title>
        <meta charset="utf-8">
        <link href="form.css" rel="stylesheet">
        <!--(7.) Link to Font Style (Copy + Paste)-->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200&family=Oswald:wght@500&display=swap" rel="stylesheet">
        <!--Favicon (Logo in the Search Bar)-->
        <link rel="shortcut icon" type = "image/svg" href="images/logo.png">
        <!--JQuery CDN: -->
        <script  src="https://code.jquery.com/jquery-3.4.1.js"  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="  crossorigin="anonymous"></script>
    </head>

    <body>
        
        <div class="background-image">
            <div class="navbar">
                <img src="images/logo.png" alt="logo" class="logo">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="intro.html">Information</a></li>
                    <li><a href="about.html">About</a></li>
                </ul>
            </div>
    
            <div class="container">
                <form id="myForm" name="">
                    <h1 class="main-header">Join Email List</h1>
                    <table>
                        <tr>
                            <td><label for="event">Name/Company</label></td>
                            <td><input type="text" name="name" id="event" pattern="[A-Za-z0-9\s]*" required 
                             oninvalid="eventErrorMsg(this)" oninput="this.setCustomValidity('')">
                            </td>
                        </tr>

                        <tr>
                            <td><label for="start">Contact</label></td>
                            <td><input type="text" id="start" name="contact" placeholder="hello123@gmail.com" required
                                oninput="this.setCustomValidity('')">
                            </td>
                        </tr>

                        <tr>
                            <td><label for="phone">Phone</label></td>
                            <td><input type="text" id="phone" name="phone" placeholder="NA if not applicable"
                                oninput="this.setCustomValidity('')"></td>
                        </tr>

                        <tr>
                            <td><label for="extra">Tell us about the problem!</label></td>
                            <td><input type="text" id="extra" name="extra" required placeholder="NA if not applicable"></td>
                        </tr>

                        <tr>
                            <td><input type="reset" id="reset-button" value="Reset"></td>
                            <td><input type="submit" id="send-button" value="Submit"></td>
                        </tr>
                    </table>
                </form>
                <span id="success"></span>
            </div>
        </div>
        <script>
            //Source: https://www.youtube.com/watch?v=nTbocTgkWqY
            //const scriptURL = 'https://script.google.com/macros/s/AKfycbwv_9f9txwDDJC1xFTcNuONuBIXbXDKQHpEUTLJrCWrnUjFRVh9ecybkW5lKWdhlJgWgw/exec'
            const scriptURL = 'https://script.google.com/macros/s/AKfycbzIG0Sc7qzd7U1zzkp7QstzIOUVvc3VlSK1FAOwQEZxVoW1hYjx6Y4l9A7Bgea5XU7_TA/exec'
            //const form = document.forms['submit-to-google-sheet']
            const form = document.getElementById("myForm");
            const success = document.getElementById("success");

            form.addEventListener('submit', e => {
                success.innerHTML = "Sending please wait...";
                e.preventDefault()
                fetch(scriptURL, { method: 'POST', body: new FormData(form)})
                .then(response => {
                    console.log('Success!', response);
                    form.reset();
                    success.innerHTML = "Sent successfully! We'll get in contact soon!";
                })
                .catch(error => console.error('Error!', error.message))
                setTimeout(function () {
                    success.innerHTML="";
                }, 8000);
            });

        </script>
    </body>
</html>